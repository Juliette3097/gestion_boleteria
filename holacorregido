app.post("/eventos", (req, res) => {
  const {
    nombre,
    descripcion,
    fecha_inicio,
    hora_inicio,
    fecha_fin,
    hora_fin,
    municipio,
    departamento,
  } = req.body;

  const sql = `
    INSERT INTO eventos (nombre, descripcion, fecha_inicio, hora_inicio, fecha_fin, hora_fin, municipio, departamento)
    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
  `;

  db.query(
    sql,
    [nombre, descripcion, fecha_inicio, hora_inicio, fecha_fin, hora_fin, municipio, departamento],
    (err, result) => {
      if (err) {
        console.error("❌ Error al registrar evento:", err);
        return res.status(500).json({ error: "Error al registrar el evento" });
      }
      res.json({ message: "✅ Evento registrado correctamente", id: result.insertId });
    }
  );
});

// ===============================
// 🎤 RF4 - Agregar Artista
// ===============================
app.post("/artistas", (req, res) => {
  const { nombres, apellidos, genero, ciudad_natal } = req.body;

  const sql = `
    INSERT INTO artistas (nombres, apellidos, genero, ciudad_natal)
    VALUES (?, ?, ?, ?)
  `;

  db.query(sql, [nombres, apellidos, genero, ciudad_natal], (err, result) => {
    if (err) {
      console.error("❌ Error al registrar artista:", err);
      return res.status(500).json({ error: "Error al registrar el artista" });
    }
    res.json({ message: "✅ Artista registrado correctamente", id: result.insertId });
  });
});

// ===============================
// 🏟️ RF3 - Agregar Localidad
// ===============================
app.post("/localidades", (req, res) => {
  const { codigo, nombre } = req.body;

  const sql = "INSERT INTO localidades (codigo, nombre) VALUES (?, ?)";

  db.query(sql, [codigo, nombre], (err, result) => {
    if (err) {
      console.error("❌ Error al registrar localidad:", err);
      return res.status(500).json({ error: "Error al registrar la localidad" });
    }
    res.json({ message: "✅ Localidad registrada correctamente", id: result.insertId });
  });
});
